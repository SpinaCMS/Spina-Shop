// Table render
document.getElementById('analytics_table').innerHTML = "<%=j render 'table' %>"

// Graph render
document.getElementById('analytics_graph').innerHTML = "<canvas id='analytics'></canvas>"

let context = document.getElementById('analytics').getContext('2d')
let chart = new Chart(context, {
  type: 'bar',
  data: {
    labels: JSON.parse("<%=j @labels_json.html_safe %>"),
    datasets: [{
      label: "Bruto winst",
      fill: false,
      lineTension: 0,
      borderWidth: 2,
      borderColor: '#26c857',
      pointStyle: 'circle',
      pointBackgroundColor: '#26c857',
      type: 'line',
      data: JSON.parse("<%=j @profit.html_safe %>")
    }, {
      label: "Omzet ex. btw",
      backgroundColor: '#6E6BB0',
      hoverBackgroundColor: '#46456E',
      borderColor: '#38375E',
      borderWidth: 1,
      data: JSON.parse("<%=j @data_json.html_safe %>")
    }, {
      label: "Kostprijs",
      backgroundColor: '#36375a',
      borderColor: '#232343',
      borderWidth: 1,
      data: JSON.parse("<%=j @cost_json.html_safe %>")
    }]
  },
  options: {
    legend: false,
    scales: {
      xAxes: [{
        stacked: true
      }]
    }
  }
})