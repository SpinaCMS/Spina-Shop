<div class="relative" style="margin: -30px -40px 0 -40px">    
  <!-- White bg header -->  
  <div class="bg-white border-b border-gray-200 p-4 md:p-6 md:pl-8 sticky top-0 z-20">
    <div class="flex flex-col md:flex-row justify-between md:items-center">
      <div class="text-2xl font-normal text-gray-700 flex items-center ">
        <%= render_breadcrumbs %>
      </div>
    </div>
    
    <nav class="-mb-1 md:-mb-3 mt-4">
      <div class="inline-flex w-auto rounded-md bg-white">
        <%= link_to spina.shop_admin_orders_path, class: "block px-3 leading-relaxed py-1 hover:text-gray-800 rounded-md text-gray-400 font-medium text-sm flex items-center #{'cursor-default text-gray-900 bg-spina-dark bg-opacity-10' if action_name == "index"}" do %>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 opacity-75 -ml-1" viewBox="0 0 20 20" fill="currentColor">
            <path d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" />
          </svg>
          Alle bestellingen
        <% end %>
        
        <%= link_to spina.concepts_shop_admin_orders_path, class: "block px-3 leading-relaxed py-1 hover:text-gray-800 rounded-md text-gray-400 font-medium text-sm flex items-center #{'cursor-default text-gray-900 bg-spina-dark bg-opacity-10' if action_name == "concepts"}" do %>
          Concepten
        <% end %>
      </div>
    </nav>
  </div>
  
  <div class="flex space-x-3 p-4 py-6 z-20 md:absolute top-0 right-0 md:-top-0.5 md:right-0 h-md:full w-full md:w-auto items-start md:pr-8 justify-end">
    <%= link_to 'Nieuwe bestelling', spina.new_shop_admin_order_path, class: 'btn btn-default' %>
  </div>
  
  <div class="p-8">
    <div class="flex gap-5">
      <div class="flex-1 overflow-scroll">
        <div class="bg-white border border-gray-300 rounded-md divide-y divide-gray-100 infinite-list">
          <div class="flex items-center text-sm font-semibold px-3 py-2 space-x-6">
            <div class="w-24">Bestelling</div>
            <div class="flex-1">Klant</div>
            <div class="w-28 text-right">Totaal</div>
            
            <div class="w-20 text-right hidden xl:block">BusBikers</div>
            <div class="w-20 text-right hidden xl:block">Trekhaken</div>
            <div class="w-32 text-right hidden xl:block">Verzending</div>
            
            <div class="w-24"></div>
            <div class="w-28 text-right"></div>
          </div>
          
          <div class="records">
            <%= render collection: @orders, partial: 'spina/shop/admin/orders/order' %>
          </div>
          
          <div class="pagination text-center">
            <%= link_to_next_page @orders, "Volgende", data: {remote: true} %>
          </div>
        </div>
      </div>
      
      <% if action_name == "index" %>
        <div class="w-44 flex-shrink-0" data-controller="filter">
          <%= form_with url: spina.shop_admin_orders_path, method: :get, data: {target: "filter.form"} do |f| %>
            <%= button_tag "Filter", type: :submit, class: "hidden", data: {target: "filter.submitButton"} %>
            <div class="font-semibold text-sm text-gray-700 mb-1">Zoekterm</div>
            <%= f.search_field :query, value: params[:query], placeholder: "Search", class: "w-full h-9 border border-gray-400 rounded-lg", style: "padding-top: 0; padding-bottom: 0; padding-right: 0", autocomplete: "off", data: {action: "input->filter#submit"} %>
            
            <div class="font-semibold text-sm text-gray-700 mb-1 mt-6">Periode</div>
            
            <% ["Elke datum"].each.with_index do |period, index| %>
              <label class="cursor-pointer block py-1.5">
                <%= f.radio_button :date_range, 1, class: 'border-gray-300 hover:border-gray-400 shadow-sm checked:bg-spina', checked: index.zero? %>
                <span class="text-xs font-medium ml-1 align-middle"><%= period %></span>
              </label>
            <% end %>
            
            <div class="font-semibold text-sm text-gray-700 mb-1 mt-6">Status</div>
            
            <% [:confirming, :received, :paid, :preparing, :shipped, :ready_for_pickup, :picked_up, :delivered, :failed, :cancelled, :refunded].each do |status| %>
              <label class="cursor-pointer block py-1.5">
                <%= f.check_box :status, {class: 'border-gray-300 hover:border-gray-400 shadow-sm rounded checked:bg-spina', multiple: true, checked: params[:status]&.include?(status.to_s), data: {action: "filter#submit"}}, status, nil %>
                <span class="text-xs font-medium ml-1 align-middle">
                  <%=t "spina.shop.orders.states.#{status}" %>
                </span>
              </label>
            <% end %>
            
            <div class="font-semibold text-sm text-gray-700 mb-1 mt-6">Sorteren</div>
            
            <% [["Nieuwste eerst", "order_number DESC"], ["Oudste eerst", "order_number ASC"]].each.with_index do |order, index| %>
              <label class="cursor-pointer block py-1.5">
                <%= f.radio_button :order, order[1], class: 'border-gray-300 hover:border-gray-400 shadow-sm checked:bg-spina', checked: index.zero?, data: {action: "filter#submit"} %>
                <span class="text-xs font-medium ml-1 align-middle"><%= order[0] %></span>
              </label>
            <% end %>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>
