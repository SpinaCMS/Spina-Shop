.modal
  %header
    = link_to '#', data: {dismiss: "modal"} do
      = icon('cross')
    %h3.text-center
      %strong= @products.count
      %strong= Spina::Shop::Product.model_name.human(count: @products.count).downcase 
      aanpassen

  = form_with url: spina.shop_admin_products_batch_path(q: params.permit(q: {})[:q]), method: :put do |f|
    - if params[:select_all]
      = f.hidden_field :select_all, value: params[:select_all]
    - else
      - @products.each do |product|
        = f.hidden_field :product_ids, multiple: true, value: product.id

    %table.table.table-collection-check-boxes.table-clickable
      = f.collection_check_boxes(:store_ids, stores, :id, :name) do |b|
        %tr
          %td{style: 'width: 10px'}
            .form-checkbox{style: 'width: 20px'}
              = b.check_box checked: b.object.id.in?(@products.first.try(:store_ids) || [])
              %label
          %th{style: 'padding-left: 0'}
            .pull-right
              .store-badge{style: "background: #{b.object.color}"}= b.object.initials
            %span= b.text
    
    %footer
      = link_to t('spina.cancel'), '#', data: {dismiss: 'modal'}
      = button_tag type: :submit, class: 'primary' do
        %i.icon.icon-check{style: 'margin-right: 4px'}
        =t 'spina.shop.save'