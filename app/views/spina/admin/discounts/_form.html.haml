= form_for [:admin, @discount] do |f|
  %header#header
    .breadcrumbs
      = render_breadcrumbs separator: '<div class="divider"></div>'

    #header_actions
      %button.button.button-primary{type: 'submit'}
        = icon('check')
        =t 'spina.shop.discounts.save'

  .well
    .horizontal-form
      .horizontal-form-group
        .horizontal-form-label Code
        .horizontal-form-content
          = f.text_field :code

      .horizontal-form-group
        .horizontal-form-label 
          Description
        .horizontal-form-content
          = f.text_field :description

      .horizontal-form-group
        .horizontal-form-label Begint op
        .horizontal-form-content
          = f.date_field :starts_at

      .horizontal-form-group
        .horizontal-form-label Verloopt op
        .horizontal-form-content
          = f.date_field :expires_at

  .well
    .horizontal-form
      .horizontal-form-group
        .horizontal-form-label Korting
        .horizontal-form-content
          = f.fields_for :discount_action do |action_fields|
            = action_fields.hidden_field :type

            = render partial: "spina/admin/discounts/fields/discount_action_fields", locals: {f: action_fields}

      .horizontal-form-group
        .horizontal-form-label Geldig voor
        .horizontal-form-content
          = f.fields_for :discount_rule do |rule_fields|
            .select-dropdown{style: 'width: 100%'}= rule_fields.select :type, options_for_select(Spina::DiscountRule.discount_rule_classes.map(&:model_name).map{|r| [r.human, r]}, f.object.type)

            = render partial: "spina/admin/discounts/fields/discount_rule_fields", locals: {f: rule_fields}
