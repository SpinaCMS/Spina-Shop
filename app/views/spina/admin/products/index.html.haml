%header#header
  #header_actions
    = search_form_for [:admin, @q], html: {class: 'search-form', style: 'display: inline-block'} do |f|
      .search-input= f.search_field :product_items_sku_or_translations_name_cont, style: 'box-sizing: border-box', placeholder: t('spina.search')
      = button_tag "", type: :submit, class: 'button icon icon-search icon-only', style: 'margin-bottom: 0'

  .breadcrumbs
    .pull-right
      = link_to new_by_category_admin_products_path, class: 'button button-mini icon-only', data: {remote: true} do
        %i.icon.icon-plus{style: 'vertical-align: bottom'}
    = render_breadcrumbs separator: '<div class="divider"></div>'

  %nav#secondary
    %ul
      %li.active
        = link_to admin_products_path do
          =t 'spina.shop.products.title'

      %li
        = link_to admin_product_categories_path do
          = Spina::ProductCategory.model_name.human count: 2

      %li
        = link_to admin_product_bundles_path do
          = Spina::ProductBundle.model_name.human count: 2

.table-container.infinite-table
  %table.table.table-clickable
    %thead
      %tr
        %th= sort_link @q, :product_items_sku, Spina::ProductItem.human_attribute_name(:sku), {}, class: 'table-sort'
        %th= sort_link @q, :translations_name, Spina::ProductItem.human_attribute_name(:name), {}, class: 'table-sort'
        %th{style: 'text-align: right'}= sort_link @q, :product_items_price, Spina::ProductItem.human_attribute_name(:price), {}, class: 'table-sort'
        %th{style: 'text-align: right'}= Spina::ProductItem.human_attribute_name(:stock_level)

    %tbody
      = render partial: "product", collection: @products.to_a.uniq

  .pagination= link_to_next_page @products, 'Next', params: params.except(*request.path_parameters.keys).permit!